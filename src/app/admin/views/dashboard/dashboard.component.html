<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
 <!-- Tabs -->
<div class="mb-4 border-b flex space-x-4">
  <button [ngClass]="{ 'border-b-2 border-primary font-bold': statMode === 'today' }" (click)="setStatMode('today')">Hôm nay</button>
  <button [ngClass]="{ 'border-b-2 border-primary font-bold': statMode === 'month' }" (click)="setStatMode('month')">Tháng này</button>
  <button [ngClass]="{ 'border-b-2 border-primary font-bold': statMode === 'custom' }" (click)="setStatMode('custom')">Tuỳ chọn...</button>
</div>

<!-- Date range picker -->
<div *ngIf="statMode === 'custom'" class="mb-4 flex items-center gap-4">
  <label>Từ:</label>
  <input type="date" [(ngModel)]="fromDate" />
  <label>Đến:</label>
  <input type="date" [(ngModel)]="toDate" />
  <button class="btn btn-sm btn-primary" (click)="loadDashboard()">Xem</button>
</div>
<c-card>
  <c-card-body>
    <h6 class="text-sm text-muted">Tổng số đặt phòng</h6>
    <h3 class="text-lg font-semibold mb-3">{{ totalBookings }}</h3>

    <table class="w-full text-sm">
      <tbody>
        <tr>
          <td class="text-muted">✔️ Thành công</td>
          <td class="text-end font-medium">{{ successCount }}</td>
          <td class="text-muted">Tỷ lệ <span class="text-success">({{ (successCount / totalBookings * 100) | number: '1.0-0' }}%)</span></td>
        </tr>
        <tr>
          <td class="text-muted">❌ Huỷ</td>
          <td class="text-end font-medium">{{ canceledCount }}</td>
        </tr>
      </tbody>
    </table>
  </c-card-body>
</c-card>

<c-card>
    <c-card-body>
      <h6 class="text-sm text-muted">Tổng số người dùng</h6>
      <h3 class="text-lg font-semibold">{{ userCount }}</h3>
    </c-card-body>
  </c-card>
  <c-card>
    <c-card-body>
      <h6 class="text-sm text-muted">Tổng số phòng hoạt động</h6>
      <h3 class="text-lg font-semibold">{{ activeRooms }}</h3>
    </c-card-body>
  </c-card>

  <c-card>
     <c-card-body>
      <tbody>
        <tr>
          <td class="text-muted"><h6>Số check-in hôm nay</h6></td>
          <td class="text-end font-medium">{{ todayCheckins }}</td>
        </tr>
        <tr>
          <td class="text-muted"><h6>Số check-in trong tháng</h6></td>
          <td class="text-end font-medium">{{ monthCheckins }}</td>
        </tr>
      </tbody>
     </c-card-body>
  </c-card>

  <c-card>
    <c-card-body>
       <tr>
          <td class="text-muted"><h6>Số check-out hôm nay</h6></td>
          <td class="text-end font-medium">{{ todayCheckouts }}</td>
        </tr>
        <tr>
          <td class="text-muted"><h6>Số check-out trong tháng</h6></td>
          <td class="text-end font-medium">{{ monthCheckouts }}</td>
        </tr>
    </c-card-body>
  </c-card>
</div>

<c-card class="mb-4">
  <c-card-header>Chi tiết thống kê</c-card-header>
  <c-card-body>
    <c-chart type="bar" [data]="chartBarData" [options]="options" />
  </c-card-body>
</c-card>
<c-chart *ngIf="chartBarData?.datasets?.length" type="bar" [data]="topServicesChartData"></c-chart>
<c-chart type="bar" [data]="topRoomsChartData"></c-chart>
<c-chart type="bar" [data]="monthlyBookingsChartData"></c-chart>
<c-chart type="line" [data]="monthlyRevenueChartData"></c-chart>